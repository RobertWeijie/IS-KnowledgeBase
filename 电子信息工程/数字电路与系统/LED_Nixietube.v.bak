module LED_Nixietube(Sys_CLK,Data_Bin,EN,COM,SEG);

input Sys_CLK;
input EN;
input [3:0]Data_Bin;
output [3:0]COM;
output [7:0]SEG;

wire [3:0]Num_Display;
reg a;
reg [7:0]SEG;
reg [1:0]COM_Cnt;
reg [3:0]COM_R;

reg Div_CLK;
reg [12:0]Div_Cnt;

assign Num_Display = Data_Bin;
assign COM=COM_R;

parameter Display_0 = 8'b11111100;
parameter Display_1 = 8'b01100000;




initial
begin
	SEG <= 8'b0;
	COM_Cnt <= 2'b00;
	Div_CLK <= 1'b0;
	Div_Cnt <= 13'b0;
end

always@(posedge Sys_CLK)
begin
	if(Div_Cnt < 13'd6000)
		Div_Cnt = Div_Cnt + 1'b1;
	else
	begin
		Div_CLK = ~Div_CLK;
		Div_Cnt = 13'b0;
	end
end

always @(posedge Div_CLK)
begin
	COM_Cnt<=COM_Cnt+1;
end


always@(COM_Cnt)
begin
	case(COM_Cnt)
	2'b00:begin COM_R<=4'b1110;a=Data_Bin[0];end
	2'b01:begin COM_R<=4'b1101;a=Data_Bin[1];end
	2'b10:begin COM_R<=4'b1011;a=Data_Bin[2];end
	2'b11:begin COM_R<=4'b0111;a=Data_Bin[3];end
	default:begin COM_R=COM_R;a=a;end
	endcase
end

always@(a)
begin
	case(a)
	1'b0:SEG <= Display_0;
	1'b1:SEG <= Display_1;
	default:SEG <= 1'b0;
	endcase
end

endmodule